"0","## import treatment IDs"
"0","IDs<-read.csv(""data/treatment.IDs.csv"")"
"0",""
"0","##### grab files in a list"
"0","Total.DOC.files <- list.files(path=""data/DOC.TN"", pattern = ""csv$"", full.names = T)"
"0","Total.DOC.files"
"1","[1]"
"1"," ""data/DOC.TN/DOC_T0.csv"""
"1"," ""data/DOC.TN/DOC_T1.csv"""
"1"," ""data/DOC.TN/DOC_T2.csv"""
"1","
"
"1","[4]"
"1"," ""data/DOC.TN/DOC_T3.csv"""
"1"," ""data/DOC.TN/DOC_T4.csv"""
"1","
"
"0","##### what are the file names, sans extensions using package 'tools'"
"0","file.names<-file_path_sans_ext(list.files(path=""data/DOC.TN"", pattern = ""csv$"", full.names = F))"
"0","file.names"
"1","[1]"
"1"," ""DOC_T0"""
"1"," ""DOC_T1"""
"1"," ""DOC_T2"""
"1"," ""DOC_T3"""
"1"," ""DOC_T4"""
"1","
"
"0","############ formatting all data in for loop"
"0","  for(i in 1:length(Total.DOC.files))"
"0","    {"
"0","  data<-read.csv(Total.DOC.files[i], sep="","")"
"0","  data<-data[,c(1,3,4)] # removed columns we don't need"
"0","  data$File<-Total.DOC.files[i]"
"0","  colnames(data)<-c(""Tank"", ""DOC..mg.L"", ""TN..mg.L"", ""File"")"
"0","  data$Tank<- IDs$Tank"
"0","  data$Tank<-as.numeric(as.character(data$Tank)) # make the column of samples all numeric"
"0","  data <- data[!is.na(as.numeric(as.character(data$Tank))),] # remove all rows that aren't numeric/tanks"
"0","  data$Treatment<-IDs$Treatment"
"0","  data$plant.mass..g<-IDs$plant.mass..g"
"0","  make.names(assign(paste(file.names[i], sep=""""), data)) # make the file name the name of new df for loop df"
"0","  }"
"0","########## this is the end of the loop"
"0",""
"0",""
"0","ls() #see all dfs you've made, the above will be df matching their file names"
"1"," [1]"
"1"," ""chl.dat""          "
"1"," ""chl.out.rem""      "
"1"," ""chl.plots""        "
"1"," ""chla.T0""          "
"1","
"
"1"," [5]"
"1"," ""chla.T1""          "
"1"," ""chla.T2""          "
"1"," ""chla.T3""          "
"1"," ""chla.T4""          "
"1","
"
"1"," [9]"
"1"," ""data""             "
"1"," ""DOC_T0""           "
"1"," ""DOC_T1""           "
"1"," ""DOC_T2""           "
"1","
"
"1","[13]"
"1"," ""DOC_T3""           "
"1"," ""DOC_T4""           "
"1"," ""extract.legend""   "
"1"," ""Fig.formatting""   "
"1","
"
"1","[17]"
"1"," ""file.names""       "
"1"," ""i""                "
"1"," ""IDs""              "
"1"," ""NEP.T1""           "
"1","
"
"1","[21]"
"1"," ""NEP.T2""           "
"1"," ""NEP.T3""           "
"1"," ""NEP.T4""           "
"1"," ""NER.T1""           "
"1","
"
"1","[25]"
"1"," ""NER.T2""           "
"1"," ""NER.T3""           "
"1"," ""NER.T4""           "
"1"," ""O2.change.T1""     "
"1","
"
"1","[29]"
"1"," ""O2.change.T2""     "
"1"," ""O2.change.T3""     "
"1"," ""O2.change.T4""     "
"1"," ""O2.T1""            "
"1","
"
"1","[33]"
"1"," ""O2.T2""            "
"1"," ""O2.T3""            "
"1"," ""O2.T4""            "
"1"," ""O2.tanks""         "
"1","
"
"1","[37]"
"1"," ""O2change.alltimes"""
"1"," ""PnR.alltimes""     "
"1"," ""T1.AM1""           "
"1"," ""T1.AM2""           "
"1","
"
"1","[41]"
"1"," ""T1.Dawn1""         "
"1"," ""T1.Dawn2""         "
"1"," ""T1.Dusk""          "
"1"," ""T1.O2""            "
"1","
"
"1","[45]"
"1"," ""T1.PM1""           "
"1"," ""T1.Prod""          "
"1"," ""T2.AM1""           "
"1"," ""T2.AM2""           "
"1","
"
"1","[49]"
"1"," ""T2.Dawn1""         "
"1"," ""T2.Dawn2""         "
"1"," ""T2.Dusk""          "
"1"," ""T2.O2""            "
"1","
"
"1","[53]"
"1"," ""T2.PM1""           "
"1"," ""T2.Prod""          "
"1"," ""T3.AM1""           "
"1"," ""T3.AM2""           "
"1","
"
"1","[57]"
"1"," ""T3.Dawn1""         "
"1"," ""T3.Dawn2""         "
"1"," ""T3.Dusk""          "
"1"," ""T3.O2""            "
"1","
"
"1","[61]"
"1"," ""T3.PM1""           "
"1"," ""T3.Prod""          "
"1"," ""T4.AM1""           "
"1"," ""T4.AM2""           "
"1","
"
"1","[65]"
"1"," ""T4.Dawn1""         "
"1"," ""T4.Dawn2""         "
"1"," ""T4.Dusk""          "
"1"," ""T4.O2""            "
"1","
"
"1","[69]"
"1"," ""T4.PM1""           "
"1"," ""T4.Prod""          "
"1"," ""Total.DOC.files""  "
"1"," ""YSI""              "
"1","
"
"1","[73]"
"1"," ""YSI.T1""           "
"1"," ""YSI.T2""           "
"1"," ""YSI.T3""           "
"1"," ""YSI.T4""           "
"1","
"
"0","#Combine files from loop to single df"
"0","DOC.df<-rbind(DOC_T0, DOC_T1, DOC_T2, DOC_T3, DOC_T4)"
"0",""
"0","DOC.df$File <- sapply(strsplit(DOC.df$File, ""/""), `[`, 3) # extract sample names"
"0",""
"0","# alternative way to code teh above"
"0","#give the 10th-24th character of the file name, removing the rest"
"0","#DOC.df$File<-substr(DOC.df$File, 13, 27) "
"0",""
"0","#alternatively"
"0","# remove the 9 letters ('^.) at start "
"0","# remove the 4 letters (.$') at end"
"0","#DOC.df$File<-gsub('^.........|....$', '', DOC.df$File) "
"0",""
"0","# if equals DOC_T0_11052021 then, T0, if not then T1"
"0","DOC.df$Time.point<- as.factor(ifelse(DOC.df$File==""DOC_T0.csv"", ""T0"","
"0","         ifelse (DOC.df$File==""DOC_T1.csv"", ""T1"","
"0","           ifelse (DOC.df$File==""DOC_T2.csv"", ""T2"", "
"0","                   ifelse(DOC.df$File==""DOC_T3.csv"", ""T3"", ""T4"")))))"
"0",""
"0","#rearrange"
"0","DOC.df<- DOC.df %>% "
"0","  select(File, Time.point, Treatment, Tank, plant.mass..g, DOC..mg.L, TN..mg.L) "
"0",""
