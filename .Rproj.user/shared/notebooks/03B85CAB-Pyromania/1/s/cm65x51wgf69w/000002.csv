"0",""
"0","##### grab files in a list"
"0","UVBio.files <- list.files(path=""data/UVBIO"", pattern = ""csv$"", full.names = T)"
"0","UVBio.files"
"1","[1]"
"1"," ""data/UVBIO/DOC_NoUV_T1.csv"""
"1"," ""data/UVBIO/DOC_NoUV_T2.csv"""
"1"," ""data/UVBIO/DOC_NoUV_T3.csv"""
"1","
"
"1","[4]"
"1"," ""data/UVBIO/DOC_UV_T1.csv""  "
"1"," ""data/UVBIO/DOC_UV_T2.csv""  "
"1"," ""data/UVBIO/DOC_UV_T3.csv""  "
"1","
"
"0","##### what are the file names, sans extensions using package 'tools'"
"0","file.names<-file_path_sans_ext(list.files(path=""data/UVBIO"", pattern = ""csv$"", full.names = F))"
"0","file.names"
"1","[1]"
"1"," ""DOC_NoUV_T1"""
"1"," ""DOC_NoUV_T2"""
"1"," ""DOC_NoUV_T3"""
"1"," ""DOC_UV_T1""  "
"1"," ""DOC_UV_T2""  "
"1"," ""DOC_UV_T3""  "
"1","
"
"0","############ formatting all data in for loop"
"0","  for(i in 1:length(UVBio.files))"
"0","    {"
"0","  data<-read.csv(UVBio.files[i], sep="","") #skip 13 rows where standards are"
"0","  data<-data[,c(1,3,4)] # removed columns we don't need"
"0","  data$File<-UVBio.files[i]"
"0","  colnames(data)<-c(""Tank"", ""DOC..mg.L"", ""TN..mg.L"", ""File"") "
"0","  data$Tank<-as.character(data$Tank)"
"0","  data$Treatment<-IDs$Treatment # add treatment info"
"0","  data$plant.mass..g<-IDs$plant.mass..g # add plant biomass info"
"0","  make.names(assign(paste(file.names[i], sep=""""), data)) # make the file name the name of new df for loop df"
"0","  }"
"0","########## this is the end of the loop"
"0",""
"0",""
"0","ls() #see all dfs you've made, the above will be df matching their file names"
"1"," [1]"
"1"," ""chl.dat""          "
"1"," ""chl.out.rem""      "
"1"," ""chl.plots""        "
"1"," ""chla.T0""          "
"1","
"
"1"," [5]"
"1"," ""chla.T1""          "
"1"," ""chla.T2""          "
"1"," ""chla.T3""          "
"1"," ""chla.T4""          "
"1","
"
"1"," [9]"
"1"," ""data""             "
"1"," ""DOC_NoUV_T1""      "
"1"," ""DOC_NoUV_T2""      "
"1"," ""DOC_NoUV_T3""      "
"1","
"
"1","[13]"
"1"," ""DOC_T0""           "
"1"," ""DOC_T1""           "
"1"," ""DOC_T2""           "
"1"," ""DOC_T3""           "
"1","
"
"1","[17]"
"1"," ""DOC_T4""           "
"1"," ""DOC_UV_T1""        "
"1"," ""DOC_UV_T2""        "
"1"," ""DOC_UV_T3""        "
"1","
"
"1","[21]"
"1"," ""DOC.df""           "
"1"," ""DOC.plots""        "
"1"," ""DOC.T0""           "
"1"," ""DOC.T1""           "
"1","
"
"1","[25]"
"1"," ""DOC.T2""           "
"1"," ""DOC.T3""           "
"1"," ""DOC.T4""           "
"1"," ""extract.legend""   "
"1","
"
"1","[29]"
"1"," ""Fig.formatting""   "
"1"," ""file.names""       "
"1"," ""i""                "
"1"," ""IDs""              "
"1","
"
"1","[33]"
"1"," ""NEP.T1""           "
"1"," ""NEP.T2""           "
"1"," ""NEP.T3""           "
"1"," ""NEP.T4""           "
"1","
"
"1","[37]"
"1"," ""NER.T1""           "
"1"," ""NER.T2""           "
"1"," ""NER.T3""           "
"1"," ""NER.T4""           "
"1","
"
"1","[41]"
"1"," ""O2.change.T1""     "
"1"," ""O2.change.T2""     "
"1"," ""O2.change.T3""     "
"1"," ""O2.change.T4""     "
"1","
"
"1","[45]"
"1"," ""O2.T1""            "
"1"," ""O2.T2""            "
"1"," ""O2.T3""            "
"1"," ""O2.T4""            "
"1","
"
"1","[49]"
"1"," ""O2.tanks""         "
"1"," ""O2change.alltimes"""
"1"," ""PnR.alltimes""     "
"1"," ""T1.AM1""           "
"1","
"
"1","[53]"
"1"," ""T1.AM2""           "
"1"," ""T1.Dawn1""         "
"1"," ""T1.Dawn2""         "
"1"," ""T1.Dusk""          "
"1","
"
"1","[57]"
"1"," ""T1.O2""            "
"1"," ""T1.PM1""           "
"1"," ""T1.Prod""          "
"1"," ""T2.AM1""           "
"1","
"
"1","[61]"
"1"," ""T2.AM2""           "
"1"," ""T2.Dawn1""         "
"1"," ""T2.Dawn2""         "
"1"," ""T2.Dusk""          "
"1","
"
"1","[65]"
"1"," ""T2.O2""            "
"1"," ""T2.PM1""           "
"1"," ""T2.Prod""          "
"1"," ""T3.AM1""           "
"1","
"
"1","[69]"
"1"," ""T3.AM2""           "
"1"," ""T3.Dawn1""         "
"1"," ""T3.Dawn2""         "
"1"," ""T3.Dusk""          "
"1","
"
"1","[73]"
"1"," ""T3.O2""            "
"1"," ""T3.PM1""           "
"1"," ""T3.Prod""          "
"1"," ""T4.AM1""           "
"1","
"
"1","[77]"
"1"," ""T4.AM2""           "
"1"," ""T4.Dawn1""         "
"1"," ""T4.Dawn2""         "
"1"," ""T4.Dusk""          "
"1","
"
"1","[81]"
"1"," ""T4.O2""            "
"1"," ""T4.PM1""           "
"1"," ""T4.Prod""          "
"1"," ""TN.plots""         "
"1","
"
"1","[85]"
"1"," ""TN.T0""            "
"1"," ""TN.T1""            "
"1"," ""TN.T2""            "
"1"," ""TN.T3""            "
"1","
"
"1","[89]"
"1"," ""TN.T4""            "
"1"," ""Total.DOC.files""  "
"1"," ""UVBio.files""      "
"1"," ""YSI""              "
"1","
"
"1","[93]"
"1"," ""YSI.T1""           "
"1"," ""YSI.T2""           "
"1"," ""YSI.T3""           "
"1"," ""YSI.T4""           "
"1","
"
"0","#Combine files from loop to single df"
"0","UVBIO.df<-rbind(DOC_NoUV_T1, DOC_UV_T1, DOC_NoUV_T2, DOC_UV_T2, DOC_NoUV_T3, DOC_UV_T3)"
"0",""
"0","# make new factors for filtered (F/NF) and UV (+/-)"
"0","# ** caution! Make sure this matches sheet layout after the loop!"
"0",""
"0","UVBIO.df$Filter.Trt<-rep(c(""Filtered"", ""Unfiltered""), each=30) # repeat 30 times"
"0","UVBIO.df$UV.Trt<-rep(c(""NoUV"", ""UV""), each=60) # repeat 60 times"
"0",""
"0","# check tank names in DF and make sure they are what you think they are (i.e 1-30 but w/ weird names)"
"0","Tank.fix<-rep(c(1:30), times=12) # repeat 12 times to fix all the strange tank names "
"0",""
"0","#compare tank IDS"
"0","df.test<-cbind(Tank.fix, UVBIO.df$Tank) # yep!"
"0",""
"0","UVBIO.df$Tank<-as.factor(Tank.fix) #replace old tank names"
"0",""
"0","# extract out the file names"
"0","UVBIO.df$File <- sapply(strsplit(UVBIO.df$File, ""/""), `[`, 3) # extract sample names"
"0","UVBIO.df$DOC..mg.L<-gsub(""NPOC:"","""", UVBIO.df$DOC..mg.L)"
"0","UVBIO.df$DOC..mg.L<- gsub(""mg/L"", """", UVBIO.df$DOC..mg.L)"
"0","UVBIO.df$TN..mg.L<-gsub(""TN:"","""", UVBIO.df$TN..mg.L)"
"0","UVBIO.df$TN..mg.L<- gsub(""mg/L"", """", UVBIO.df$TN..mg.L)"
"0",""
"0","#convert DOC and TN to numeric"
"0","UVBIO.df$DOC..mg.L<-as.numeric(as.character(UVBIO.df$DOC..mg.L))"
"0","UVBIO.df$TN..mg.L<- as.numeric(as.character(UVBIO.df$TN..mg.L))"
"0",""
"0",""
"0","# add a time point"
"0","# if equals DOC_UV_T1_111721 then, T1, if not then ""nothing"""
"0","UVBIO.df$Time.point<- as.factor(ifelse(UVBIO.df$File==""DOC_UV_T1.csv"", ""T1"","
"0","  ifelse(UVBIO.df$File==""DOC_NoUV_T1.csv"", ""T1"","
"0","          ifelse(UVBIO.df$File==""DOC_UV_T2.csv"", ""T2"","
"0","                ifelse(UVBIO.df$File==""DOC_NoUV_T2.csv"", ""T2"", ""T3"")))))"
"0",""
"0","#rearrange"
"0","UVBIO.df<- UVBIO.df %>% "
"0","  select(File, Time.point, Treatment, Filter.Trt, UV.Trt, Tank, plant.mass..g, DOC..mg.L, TN..mg.L)"
"0",""
"0",""
"0","# make levels for plotting and stats"
"0","# add in starting DOC and TN"
"0","# original data is... DOC_T0, DOC_T1, DOC_T2, DOC_T3, DOC_T4 -- but no need for DOC T0 and T4"
"0","# repeat 4x to account for the 4 treatments in each tank"
"0","DOC_T1.start<-rep(DOC_T1$DOC..mg.L, times=4)"
"0","DOC_T2.start<-rep(DOC_T2$DOC..mg.L, times=4)"
"0","DOC_T3.start<-rep(DOC_T3$DOC..mg.L, times=4)"
"0",""
"0","TN_T1.start<-rep(DOC_T1$TN..mg.L, times=4)"
"0","TN_T2.start<-rep(DOC_T2$TN..mg.L, times=4)"
"0","TN_T3.start<-rep(DOC_T3$TN..mg.L, times=4)"
"0",""
"0","# compile and add in as a new column"
"0","UVBIO.df$Start.DOC<-c(DOC_T1.start, DOC_T2.start, DOC_T3.start)"
"0","UVBIO.df$Start.TN<-c(TN_T1.start, TN_T2.start, TN_T3.start)"
"0",""
